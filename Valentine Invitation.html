<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Secret Message</title>
<style>
:root {
  --pink: #ffb6c1;
  --hot-pink: #ff5fa2;
  --soft-pink: #fff0f5;
  --red: #ff3b6f;
}
* { box-sizing: border-box; font-family: "Comic Sans MS", "Segoe UI", system-ui, sans-serif; }
body { margin:0; background: radial-gradient(circle at top, #ffe4ec, #ffd1dc); overflow: hidden; }

/* --- SCREEN --- */
.screen { position: fixed; inset:0; display: flex; align-items: center; justify-content: center; transition: opacity 0.8s ease, transform 0.8s ease; perspective: 1200px; }
.hidden { opacity:0; pointer-events:none; transform: scale(0.96); }

/* --- ENVELOPE PAGE --- */
.envelope-container { text-align:center; }
.envelope-wrapper { position: relative; width: 300px; height:200px; margin-bottom:22px; perspective:1200px; }
.envelope-wrapper:hover .envelope { animation: wiggle 0.6s ease-in-out infinite alternate; }
@keyframes wiggle { from{transform:rotate(-1.5deg);} to{transform:rotate(1.5deg);} }

.envelope { position:absolute; inset:0; border-radius:18px; background:#ff9db5; box-shadow:0 20px 50px rgba(0,0,0,0.2); overflow:hidden; transform-style: preserve-3d; }
.pocket { position:absolute; inset:0; background: linear-gradient(135deg,#ffadc4,#ff7fa3); clip-path: polygon(0 0,50% 56%,100% 0,100%100%,0 100%); z-index:3; }
.flap { position:absolute; inset:0; background:#ff7fa3; clip-path: polygon(0 0,50% 62%,100% 0); transform-origin: top center; transform: rotateX(0deg); transition: transform 1s cubic-bezier(.25,.9,.3,1); z-index:6; backface-visibility:hidden; }
.letter { position:absolute; left:50%; bottom:-8px; width:240px; height:160px; background:white; border-radius:14px; transform:translateX(-50%) translateY(110%); transition: transform 1s cubic-bezier(.25,.9,.3,1); z-index:4; box-shadow:0 12px 26px rgba(0,0,0,0.2); display:flex; align-items:center; justify-content:center; font-size:50px; font-weight:bold; color:#ff4f8f; }
.letter span { transform:scaleY(0); transition: transform 0.6s cubic-bezier(.2,1.3,.4,1); display:inline-block; }
.envelope-text { position:absolute; z-index:4; bottom:38px; width:100%; text-align:center; font-size:22px; font-weight:bold; color:#fff; text-shadow:0 3px 6px rgba(0,0,0,0.25); pointer-events:none; transition: opacity 0.6s ease, transform 0.6s ease; }
.envelope.open .envelope-text { opacity:0; transform:translateY(10px); }
.envelope.open .flap { transform:rotateX(180deg); }
.envelope.open .letter { transform:translateX(-50%) translateY(-42%); }
.envelope.open .letter span { transform:scaleY(1); }

.open-btn { background: linear-gradient(135deg,var(--hot-pink),var(--red)); color:white; border:none; padding:14px 34px; border-radius:999px; font-size:18px; cursor:pointer; box-shadow:0 8px 20px rgba(255,0,90,0.35); transition: transform 0.2s ease, box-shadow 0.2s ease; }
.open-btn:hover { transform:translateY(-2px) scale(1.06); box-shadow:0 12px 30px rgba(255,0,90,0.5); }

/* --- VALENTINE SCREEN --- */
.valentine-screen { flex-direction:column; gap:18px; text-align:center; padding:20px; }
.question { font-size:clamp(28px,6vw,46px); color:#ff2f6f; text-shadow:0 4px 10px rgba(255,80,130,0.25); }
.gif-container img { width:320px; height:320px; object-fit:cover; border-radius:22px; box-shadow:0 12px 30px rgba(0,0,0,0.15); }.buttons { display:flex; gap:20px; margin-top:10px; position:relative; justify-content:center; }
.btn { padding:14px 28px; border-radius:999px; border:none; font-size:18px; cursor:pointer; transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.35s ease; min-width:110px; }
.btn-yes { background:linear-gradient(135deg,#ff5fa2,#ff2f6f); color:white; box-shadow:0 8px 20px rgba(255,50,120,0.4); }
.btn-yes:hover { transform:scale(1.08); box-shadow:0 12px 28px rgba(255,50,120,0.5); }
.btn-no { z-index: 10000; background:#ffd1dc; color:#ff2f6f; box-shadow:0 6px 14px rgba(255,100,150,0.25); position:relative; }

/* --- AMBIENT FLOATING EMOJIS --- */
.ambient-heart { position: fixed; bottom: -40px; font-size: 26px; opacity: 0.35; animation: floatUp linear forwards; pointer-events: none; filter: blur(0.3px); }
@keyframes floatUp { from{transform:translateY(0) scale(0.6); opacity:0;}10%{opacity:0.35;} to{transform:translateY(-110vh) scale(1.3); opacity:0;} }

/* --- HEART EXPLOSION --- */
.heart { position: fixed; left: 50%; top: 50%; font-size: 52px; pointer-events:none; animation: fly 3.4s ease-out forwards; z-index:9999; filter: drop-shadow(0 8px 14px rgba(255,0,80,0.4)); }
@keyframes fly { 0%{transform:translate(-50%,-50%) scale(0.6); opacity:1;} 100%{transform:translate(var(--x),var(--y)) scale(1.8); opacity:0;} }

/* --- MEME IMAGE --- */
.meme { position: fixed; max-width: 350px; max-height: 350px; z-index:9999; pointer-events:none; transform: translate(-50%, -50%) scale(0); transition: transform 0.3s ease, opacity 0.3s ease; }

.zoom-forward { transform: scale(1.3); opacity:0; }
@media(max-width:520px){.buttons{flex-direction:column; gap:14px;}}
</style>
</head>
<body>

<!-- PAGE 1 ‚Äî ENVELOPE -->
<div class="screen" id="screen1">
  <div class="envelope-container">
    <div class="envelope-wrapper">
      <div class="envelope" id="envelope">
        <div class="pocket"></div>
        <div class="letter"><span>‚ù§Ô∏è</span></div>
        <div class="envelope-text">To Sali üíñ</div>
        <div class="flap"></div>
      </div>
    </div>
    <button class="open-btn" id="openBtn">Open üíñ</button>
  </div>
</div>

<!-- PAGE 2 ‚Äî QUESTION -->
<div class="screen hidden valentine-screen" id="screen2">
  <div class="question" id="questionText">Will you be my Valentine? üíò</div>
  <div class="gif-container">
    <img id="gif" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWQ0aXIwcXE2cDljZnYycXptczQzcXVneHF5MWJ0aWpkZ2xiYjg3dSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/WK7omsLop0431tZjXb/giphy.gif"/>
  </div>
  <div class="buttons">
    <button class="btn btn-yes" id="yesBtn">Yes üíñ</button>
    <button class="btn btn-no" id="noBtn">No üôÉ</button>
  </div>
</div>

<!-- AUDIOS -->
<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/03/audio_9cddc7e59b.mp3" type="audio/mpeg">
</audio>
<audio id="rockSus" src="the-rock-sound-_-sus-made-with-Voicemod.mp3"></audio>
<audio id="yaaay" src="kids-saying-yay-sound-effect_3.mp3"></audio>

<script>
const openBtn=document.getElementById("openBtn");
const envelope=document.getElementById("envelope");
const screen1=document.getElementById("screen1");
const screen2=document.getElementById("screen2");
const music=document.getElementById("music");

const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");
const gif=document.getElementById("gif");
const questionText=document.getElementById("questionText");
const rockSus=document.getElementById("rockSus");
const yaaay=document.getElementById("yaaay");

/* --- MEME IMAGES --- */
const memeImages=[
"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWt6MjFxaW5wdWEyZTdlN3Z3M256Zmhwb3N6dWQ4Nnl6endrdnZmdiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/OHRF8LZis06OiPDJby/giphy.gif",
"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYmU0cTZpcmphdzR0ZjI2OXcwd2ltMnJzYTVoZXQyNWVnNjJraHJvaCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/GAXXHdS0zXawVLOJLY/giphy.gif",
"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWw5eW9venFvaWFuajJqcTNrNzhvMjZmc2Rrc2liazBvZjgwdzhjbyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/edx4Z0hj7sqkaJOJSe/giphy.gif",
"https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWhtcjJnY2VuZDdqcXpjZXJnNjVwZzJuZzZpczM1ZzNsZjQyMzJzdCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/hECJDGJs4hQjjWLqRV/giphy.gif"
];

/* --- AMBIENT FLOATING EMOJIS --- */
let dodgeCount=0;
let ambientInterval;
function spawnAmbientEmoji(){
  const emoji=document.createElement("div");
  emoji.className="ambient-heart";
  const angryCatChance=Math.min(dodgeCount*0.12,0.85);
  emoji.textContent=Math.random()<angryCatChance?"üòæ":(Math.random()>0.5?"üíó":"üíñ");
  emoji.style.left=Math.random()*100+"vw";
  emoji.style.animationDuration=5 + Math.random()*4 +"s";
  document.body.appendChild(emoji);
  setTimeout(()=>emoji.remove(),12000);
}
ambientInterval=setInterval(()=>{ if(Math.random()<0.6) spawnAmbientEmoji(); },800);

/* --- OPEN ENVELOPE --- */
openBtn.addEventListener("click",()=>{
  openBtn.disabled=true;
  music.play().catch(()=>{});
  envelope.classList.add("open");
  setTimeout(()=>{screen1.classList.add("zoom-forward");},1400);
  setTimeout(()=>{screen1.classList.add("hidden"); screen2.classList.remove("hidden");},1800);
});

/* --- NO BUTTON DODGE AROUND GIF + MEME + ROCK SUS SOUND --- */
function dodge(e){
    const rect = noBtn.getBoundingClientRect();
    const hop = 70; // dodge distance
    let x = noBtn.offsetLeft + (Math.random() - 0.5) * hop * 2;
    let y = noBtn.offsetTop + (Math.random() - 0.5) * hop * 2;

    // safe zone = GIF rectangle + padding
    const gifRect = gif.getBoundingClientRect();
    const padding = 20;

    if(x + rect.width > gifRect.left - padding && x < gifRect.right + padding &&
       y + rect.height > gifRect.top - padding && y < gifRect.bottom + padding){
        // push button outside GIF
        if(x < window.innerWidth/2) x = gifRect.left - rect.width - padding;
        else x = gifRect.right + padding;
        if(y < window.innerHeight/2) y = gifRect.top - rect.height - padding;
        else y = gifRect.bottom + padding;
    }

    // clamp to viewport
    x = Math.max(10, Math.min(x, window.innerWidth - rect.width - 10));
    y = Math.max(10, Math.min(y, window.innerHeight - rect.height - 10));

    noBtn.style.transition = "transform 0.28s cubic-bezier(.3,1.4,.4,1)";
    noBtn.style.transform = `translate(${x}px, ${y}px)`;

    dodgeCount++;
    spawnAmbientEmoji();

    rockSus.currentTime = 0; rockSus.play();

    // Show meme in center
    const meme = document.createElement("img");
    meme.src = memeImages[Math.floor(Math.random() * memeImages.length)];
    meme.className = "meme";
    meme.style.left = "50%";
    meme.style.top = "50%";
    meme.style.transform = "translate(-50%, -50%) scale(0)";
    document.body.appendChild(meme);
    setTimeout(() => { meme.style.transform = "translate(-50%, -50%) scale(1)"; }, 10);
    setTimeout(() => { meme.remove(); }, 2000);
}

noBtn.addEventListener("mousemove", dodge);
noBtn.addEventListener("touchstart", dodge);

/* --- YES BUTTON CELEBRATION + YAAAY SOUND --- */
yesBtn.addEventListener("click",()=>{
  clearInterval(ambientInterval);
  yesBtn.style.opacity="0"; noBtn.style.opacity="0";
  yesBtn.style.pointerEvents="none"; noBtn.style.pointerEvents="none";
  questionText.textContent="YESSIRSKII üï∫üèæüíû";
  gif.src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExOXA3NHdseHVlbTI1NWs2ZHExbWV3OWgzang2azhiOWs4M2J3M3ZpaSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/auGFCmg6rM0eI/giphy.gif";

  // Play YAAAY sound
  yaaay.currentTime=0; yaaay.play();

  spawnHeartsBurst(); const interval=setInterval(spawnHeartsBurst,220);
  setTimeout(()=>clearInterval(interval),3400);
});

function spawnHeartsBurst(){
    for(let i=0;i<14;i++){
        const heart=document.createElement("div");
        heart.className="heart";
        heart.textContent=Math.random()>0.5?"üíñ":"üíò";
        const angle=Math.random()*Math.PI*2;
        const distance=190+Math.random()*300;
        heart.style.setProperty("--x",`${Math.cos(angle)*distance}px`);
        heart.style.setProperty("--y",`${Math.sin(angle)*distance}px`);
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),3600);
    }
}
</script>

</body>
</html>